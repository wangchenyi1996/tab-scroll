(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4ec41faf"],{"0b63":function(t,n,e){t.exports=e.p+"img/b.9cdcd181.png"},"0ccb":function(t,n,e){var i=e("50c4"),s=e("1148"),c=e("1d80"),a=Math.ceil,o=function(t){return function(n,e,o){var r,p,u=String(c(n)),g=u.length,f=void 0===o?" ":String(o),m=i(e);return m<=g||""==f?u:(r=m-g,p=s.call(f,a(r/f.length)),p.length>r&&(p=p.slice(0,r)),t?u+p:p+u)}};t.exports={start:o(!1),end:o(!0)}},1148:function(t,n,e){"use strict";var i=e("a691"),s=e("1d80");t.exports="".repeat||function(t){var n=String(s(this)),e="",c=i(t);if(c<0||c==1/0)throw RangeError("Wrong number of repetitions");for(;c>0;(c>>>=1)&&(n+=n))1&c&&(e+=n);return e}},"167f":function(t,n,e){t.exports=e.p+"img/t.d45994e5.png"},"25ea":function(t,n,e){t.exports=e.p+"img/1.9.a9d326d0.png"},"46ba":function(t,n,e){t.exports=e.p+"img/q.8c8825fe.png"},"4d90":function(t,n,e){"use strict";var i=e("23e7"),s=e("0ccb").start,c=e("699c");i({target:"String",proto:!0,forced:c},{padStart:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},"4de4":function(t,n,e){"use strict";var i=e("23e7"),s=e("b727").filter,c=e("d039"),a=e("1dde"),o=a("filter"),r=o&&!c((function(){[].filter.call({length:-1,0:1},(function(t){throw t}))}));i({target:"Array",proto:!0,forced:!o||!r},{filter:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},"4e26":function(t,n,e){t.exports=e.p+"img/j.f2cbd06e.png"},5027:function(t,n,e){t.exports=e.p+"img/k.5a2040f9.png"},"52fa":function(t,n,e){t.exports=e.p+"img/i.a9d326d0.png"},"5bbe":function(t,n,e){t.exports=e.p+"img/m.6cd7b078.png"},"5cfd":function(t,n,e){t.exports=e.p+"img/s.ad646c52.png"},"699c":function(t,n,e){var i=e("b39a");t.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(i)},"6eba":function(t,n,e){var i=e("23e7");i({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}})},7797:function(t,n,e){t.exports=e.p+"img/o.e780bdb7.png"},7863:function(t,n,e){},7947:function(t,n,e){t.exports=e.p+"img/1.3.511ecb17.png"},"7e77":function(t,n,e){t.exports=e.p+"img/f.ae2ac411.png"},"872e":function(t,n,e){t.exports=e.p+"img/g.4b9b4dc4.png"},"8aef":function(t,n,e){t.exports=e.p+"img/p.d346bd26.png"},"8b69":function(t,n,e){t.exports=e.p+"img/n.550d5837.png"},"97c6":function(t,n,e){t.exports=e.p+"img/1.8.e9990c15.png"},"98c9":function(t,n,e){t.exports=e.p+"img/1.6.ae2ac411.png"},"9b1f":function(t,n,e){t.exports=e.p+"img/u.3ff4bed8.png"},a756:function(t,n,e){t.exports=e.p+"img/c.511ecb17.png"},b051:function(t,n,e){t.exports=e.p+"img/r.fdbab7aa.png"},b6c2:function(t,n,e){t.exports=e.p+"img/e.b577dd17.png"},b8b9:function(t,n,e){t.exports=e.p+"img/l.3ef56d23.png"},be65:function(t,n,e){t.exports=e.p+"img/1.2.9cdcd181.png"},c28d:function(t,n,e){t.exports=e.p+"img/h.e9990c15.png"},c7bb:function(t,n,e){t.exports=e.p+"img/a.5b8c2ecf.png"},ca20:function(t,n,e){"use strict";e.r(n);var i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticStyle:{width:"100%",height:"100%"}},[e("div",{staticClass:"p1 u-f u-f-sbc"},[t._m(0),e("p",[t._v("群成员("+t._s(t.peopleCount)+")")])]),e("div",{ref:"chatMain",staticStyle:{"padding-top":"50px","padding-bottom":"70px","box-sizing":"border-box",height:"100%"},attrs:{classs:"chat-list"}},t._l(t.msgList,(function(n){return e("div",{key:n.id,staticClass:"chat-item"},[n.isJoin?e("p",{staticClass:"times"},[t._v(t._s(n.name))]):e("div",[e("p",{staticClass:"times"},[t._v(t._s(n.times))]),n.isOwn?e("div",{staticClass:"left"},[e("div",{staticClass:"c-item u-f"},[e("img",{attrs:{src:n.img,alt:"face"}}),e("div",{staticClass:"contents u-f-c u-f-jsb"},[e("span",{staticClass:"names"},[t._v(t._s(n.name))]),e("div",{staticClass:"txt"},[t._v(t._s(n.content))])])])]):e("div",{staticClass:"right"},[e("div",{staticClass:"c-item u-f-r2"},[e("img",{attrs:{src:n.img,alt:"face"}}),e("div",{staticClass:"contents u-f-c u-f-jsb"},[e("span",{staticClass:"names"},[t._v(t._s(n.name))]),e("div",{staticClass:"txt"},[t._v(t._s(n.content))])])])])])])})),0),e("div",{staticClass:"chats"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],attrs:{type:"text",placeholder:"请输入消息内容"},domProps:{value:t.inputValue},on:{keyup:function(n){return!n.type.indexOf("key")&&t._k(n.keyCode,"enter",13,n.key,"Enter")?null:t.submit(n)},input:function(n){n.target.composing||(t.inputValue=n.target.value)}}}),e("button",{staticClass:"send-btn",on:{click:t.submit}},[t._v("发送消息")])])])},s=[function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",{staticClass:"u-f u-f ac"},[i("img",{attrs:{src:e("25ea"),alt:""}}),i("span",[t._v("同事群")])])}];e("4160"),e("a15b"),e("0d03"),e("b0c0"),e("e25e"),e("159b"),e("99af"),e("4de4"),e("6eba"),e("a9e3"),e("b64b"),e("d3b7"),e("acd8"),e("4d63"),e("ac1f"),e("25f0"),e("466d"),e("4d90"),e("5319"),e("4795");function c(t){var n=new Date(parseInt(t)),e=n.getUTCFullYear(),i=n.getUTCMonth(),s=n.getDate(),c=n.getHours(),a=n.getUTCMinutes(),o=new Date,r=n.getUTCFullYear(),p=n.getUTCMonth(),u=o.getDate();if(r==e&&p==i&&u==s)return c>12?"下午 ".concat(c,":").concat(a<10?"0"+a:a):c>=10?"上午 ".concat(c,":").concat(a<10?"0"+a:a):"上午 0".concat(c,":").concat(a<10?"0"+a:a);var g=new Date(o-864e5);return e==g.getUTCFullYear()&&i==g.getUTCMonth()&&s==g.getDate()?"昨天 ".concat(c>=10?c:"0"+c,":").concat(a<10?"0"+a:a):"".concat(e,"-").concat(i+1,"-").concat(s," ").concat(c,":").concat(a<10?"0"+a:a)}var a={data:function(){return{top:0,key:1,inputValue:"",img:"http://lc-3resYveE.cn-n1.lcfile.com/77b5a9e6ebeb6cddd527/tou6.jpg",name:"王菲",content:"你好呀，我是王菲",msgList:[{id:0,name:"欢迎 谢霆锋 加入群聊",isJoin:!0},{id:1,name:"张三",content:"不要争了，我才是最帅的,不要争了，不要争了，我才是最帅的,不要争了，我才是最帅的不要争了，我才是最帅的,不要争了，我才是最帅的我才是最帅的",isOwn:!0,times:(new Date).getTime()-6e5,img:e("fd9b"),isJoin:!1},{id:2,name:"李四",content:"你不是最帅的",isOwn:!1,times:(new Date).getTime(),img:e("be65"),isJoin:!1},{id:3,name:"王五",content:"不要争了，我才是最帅的,不要争了，我才是最帅的",isOwn:!1,times:(new Date).getTime()-12e6,img:e("7947"),isJoin:!1},{id:4,name:"王大五",content:"不要争了，我才是最帅的,不要争了，我才是最帅的",isOwn:!0,times:(new Date).getTime()-42e4,img:e("98c9"),isJoin:!1},{id:6,name:"王大五",content:"不要争了，我才是最帅的,不要争了，我才是最帅的",isOwn:!0,times:(new Date).getTime()-24e4,img:e("98c9"),isJoin:!1},{id:5,name:"王qq",content:"不要争了，我才是最帅的",isOwn:!0,times:(new Date).getTime()-1008e5,img:e("97c6"),isJoin:!1}],peopleCount:0}},watch:{msgList:function(t){this.back()}},created:function(){var t=this.$route.params;this.name=t.username,this.img=t.img,this.handleTimeFormat(),this.join(this.name,this.img,this.content),this.welcome(),this.quit(),this.receiveMsg()},mounted:function(){this.back()},methods:{back:function(){var t=this;this.$nextTick((function(){t.top=t.$refs.chatMain.clientHeight,window.scrollTo(0,t.top)}))},handleTimeFormat:function(){this.msgList.forEach((function(t){"number"===typeof t.times&&(t.times=c(t.times))}))},join:function(t,n,e){this.socket.emit("join",t,n,e),this.back()},welcome:function(){var t=this;this.socket.on("welcome",(function(n,e){var i={name:"欢迎 "+n+" 加入群聊",isJoin:!0};t.msgList.push(i),t.peopleCount=e.length}))},quit:function(){var t=this;this.socket.on("quit",(function(n,e){var i={name:n+" 退出群聊",isJoin:!0};t.msgList.push(i),console.log("退出群聊的用户信息：",e),t.peopleCount+=-1,t.back()}))},submit:function(){var t=this;if(this.inputValue.length){var n={id:2*parseInt(this.msgList.length+1),name:this.name,content:this.inputValue,isOwn:this.inputValue.length%2===0,times:(new Date).getTime(),img:e("f95d")("./"+this.img+".png"),isJoin:!1};console.log(n.img),this.msgList.push(n),this.handleTimeFormat(),this.inputValue="",this.socket.emit("message",n),this.key++}this.$nextTick((function(){t.back()}))},receiveMsg:function(){var t=this;this.socket.on("sendMsg",(function(n){t.msgList.push(n),t.handleTimeFormat()})),this.back()}}},o=a,r=(e("e435"),e("2877")),p=Object(r["a"])(o,i,s,!1,null,"02fa20c6",null);n["default"]=p.exports},e435:function(t,n,e){"use strict";var i=e("7863"),s=e.n(i);s.a},f95d:function(t,n,e){var i={"./a.png":"c7bb","./b.png":"0b63","./c.png":"a756","./d.png":"fa55","./e.png":"b6c2","./f.png":"7e77","./g.png":"872e","./h.png":"c28d","./i.png":"52fa","./j.png":"4e26","./k.png":"5027","./l.png":"b8b9","./m.png":"5bbe","./n.png":"8b69","./o.png":"7797","./p.png":"8aef","./q.png":"46ba","./r.png":"b051","./s.png":"5cfd","./t.png":"167f","./u.png":"9b1f"};function s(t){var n=c(t);return e(n)}function c(t){if(!e.o(i,t)){var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}return i[t]}s.keys=function(){return Object.keys(i)},s.resolve=c,t.exports=s,s.id="f95d"},fa55:function(t,n,e){t.exports=e.p+"img/d.c8d67341.png"},fd9b:function(t,n,e){t.exports=e.p+"img/1.1.5b8c2ecf.png"}}]);